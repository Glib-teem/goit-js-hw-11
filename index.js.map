{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '51358169-fa0c0ba6de1b0bb5150f64058';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query) {\n  if (!query || query.trim() === '') {\n    throw new Error('Search query cannot be empty');\n  }\n\n  const params = {\n    key: API_KEY,\n    q: query.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 40,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n\n    if (!response.data || !Array.isArray(response.data.hits)) {\n      throw new Error('Invalid response from Pixabay API');\n    }\n\n    return response.data;\n  } catch (error) {\n    if (error.response) {\n      const status = error.response.status;\n      const message = error.response.data?.error || error.message;\n\n      switch (status) {\n        case 400:\n          throw new Error('Invalid search parameters');\n        case 403:\n          throw new Error('Invalid API key or access denied');\n        case 429:\n          throw new Error('Rate limit exceeded. Please try again later');\n        default:\n          throw new Error(`Pixabay API error: ${status} - ${message}`);\n      }\n    } else if (error.request) {\n      throw new Error('Network error: Unable to connect to Pixabay API');\n    } else {\n      throw new Error(`Error: ${error.message}`);\n    }\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\n\n// Перевірка наявності елементів\nif (!galleryEl) {\n  console.error(\n    'Gallery element not found! Make sure you have element with class \"gallery\"'\n  );\n}\n\nif (!loaderEl) {\n  console.error(\n    'Loader element not found! Make sure you have element with class \"loader\"'\n  );\n}\n\n// Ініціалізую SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  if (!Array.isArray(images) || images.length === 0) {\n    console.warn('No images to display');\n    return;\n  }\n\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" loading=\"lazy\">\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n          <p class=\"info-item\"><b>Views:</b> ${views}</p>\n          <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n          <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh(); // Оновлюю SimpleLightbox\n}\n\nexport function clearGallery() {\n  if (galleryEl) {\n    galleryEl.innerHTML = '';\n  }\n}\n\nexport function showLoader() {\n  if (loaderEl) {\n    loaderEl.classList.remove('is-hidden');\n  }\n}\n\nexport function hideLoader() {\n  if (loaderEl) {\n    loaderEl.classList.add('is-hidden');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\n\n// Перевірка наявності форми\nif (!formEl) {\n  console.error(\n    'Form element not found! Make sure you have form with class \"form\"'\n  );\n}\n\n// Налаштування iziToast\niziToast.settings({\n  timeout: 5000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n});\n\nformEl?.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const searchInput = formEl.elements['search-text'];\n\n  // Перевірка наявності поля вводу\n  if (!searchInput) {\n    console.error(\n      'Search input not found! Make sure input has name=\"search-text\"'\n    );\n    return;\n  }\n\n  const query = searchInput.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Search input must not be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  // Очищення галереї та показ лоадера\n  clearGallery();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'No Results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      createGallery(data.hits);\n\n      // успішне повідомлення\n      iziToast.success({\n        title: 'Success',\n        message: `Found ${data.totalHits} images`,\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error('Search error:', error);\n\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    formEl.reset();\n  }\n});\n\n// функція для плавного скролу\nexport function smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","params","response","axios","error","status","message","_a","galleryEl","loaderEl","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","formEl","iziToast","event","searchInput","data"],"mappings":"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"}